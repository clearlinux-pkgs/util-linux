--- util-linux-2.29/configure~	2016-11-08 10:37:19.000000000 +0000
+++ util-linux-2.29/configure	2017-06-03 17:07:31.685932459 +0000
@@ -20564,12 +20564,12 @@
     pkg_cv_TINFO_CFLAGS="$TINFO_CFLAGS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfo\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "tinfo") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfow\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "tinfow") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_TINFO_CFLAGS=`$PKG_CONFIG --cflags "tinfo" 2>/dev/null`
+  pkg_cv_TINFO_CFLAGS=`$PKG_CONFIG --cflags "tinfow" 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -20581,12 +20581,12 @@
     pkg_cv_TINFO_LIBS="$TINFO_LIBS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfo\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "tinfo") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfow\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "tinfow") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_TINFO_LIBS=`$PKG_CONFIG --libs "tinfo" 2>/dev/null`
+  pkg_cv_TINFO_LIBS=`$PKG_CONFIG --libs "tinfow" 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -20607,22 +20607,22 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        TINFO_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "tinfo" 2>&1`
+	        TINFO_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "tinfow" 2>&1`
         else
-	        TINFO_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "tinfo" 2>&1`
+	        TINFO_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "tinfow" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$TINFO_PKG_ERRORS" >&5
 
 
 
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltinfo" >&5
-$as_echo_n "checking for tgetent in -ltinfo... " >&6; }
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltinfow" >&5
+$as_echo_n "checking for tgetent in -ltinfow... " >&6; }
 if ${ac_cv_lib_tinfo_tgetent+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-ltinfo  $LIBS"
+LIBS="-ltinfow  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -20655,8 +20655,8 @@
 if test "x$ac_cv_lib_tinfo_tgetent" = xyes; then :
 
        have_tinfo=yes
-       TINFO_LIBS="-ltinfo"
-       TINFO_LIBS_STATIC="-ltinfo"
+       TINFO_LIBS="-ltinfow"
+       TINFO_LIBS_STATIC="-ltinfow"
        TINFO_CFLAGS=""
 fi
 
@@ -20666,13 +20666,13 @@
 $as_echo "no" >&6; }
 
 
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltinfo" >&5
-$as_echo_n "checking for tgetent in -ltinfo... " >&6; }
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltinfow" >&5
+$as_echo_n "checking for tgetent in -ltinfow... " >&6; }
 if ${ac_cv_lib_tinfo_tgetent+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-ltinfo  $LIBS"
+LIBS="-ltinfow  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -20705,8 +20705,8 @@
 if test "x$ac_cv_lib_tinfo_tgetent" = xyes; then :
 
        have_tinfo=yes
-       TINFO_LIBS="-ltinfo"
-       TINFO_LIBS_STATIC="-ltinfo"
+       TINFO_LIBS="-ltinfow"
+       TINFO_LIBS_STATIC="-ltinfow"
        TINFO_CFLAGS=""
 fi
 
@@ -20719,12 +20719,12 @@
 
         have_tinfo=yes
 
-  if { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfo\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "tinfo") 2>&5
+  if { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tinfow\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "tinfow") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-    TINFO_LIBS_STATIC=`$PKG_CONFIG --libs --static "tinfo"`
+    TINFO_LIBS_STATIC=`$PKG_CONFIG --libs --static "tinfow"`
   else
     as_fn_error $? "pkg-config description of tinfo, needed for static build, is not available" "$LINENO" 5
   fi
--- util-linux-2.29/configure.ac~	2016-11-08 10:35:33.000000000 +0000
+++ util-linux-2.29/configure.ac	2017-06-03 17:24:51.699319087 +0000
@@ -850,7 +850,7 @@
 ])
 
 
-AC_ARG_WITH([tinfo], AS_HELP_STRING([--without-tinfo], [compile without libtinfo]),
+AC_ARG_WITH([tinfow], AS_HELP_STRING([--without-tinfo], [compile without libtinfo]),
   [], [with_tinfo=auto]
 )
 have_tinfo=no
@@ -859,13 +859,13 @@
   PKG_CHECK_MODULES(TINFO, [tinfo], [
     dnl pkg-config success
     have_tinfo=yes
-    UL_PKG_STATIC([TINFO_LIBS_STATIC], [tinfo])], [
+    UL_PKG_STATIC([TINFO_LIBS_STATIC], [tinfow])], [
 
     dnl If pkg-config failed, fall back to classic searching.
     AC_CHECK_LIB([tinfo], [tgetent], [
        have_tinfo=yes
-       TINFO_LIBS="-ltinfo"
-       TINFO_LIBS_STATIC="-ltinfo"
+       TINFO_LIBS="-ltinfow"
+       TINFO_LIBS_STATIC="-ltinfow"
        TINFO_CFLAGS=""])
   ])
 ])
--- util-linux-2.29/configure.ac~	2017-06-03 17:24:51.000000000 +0000
+++ util-linux-2.29/configure.ac	2017-06-03 17:27:58.631825301 +0000
@@ -856,13 +856,13 @@
 have_tinfo=no
 AS_IF([test "x$with_tinfo" != xno], [
   dnl Try pkg-config for libtinfo
-  PKG_CHECK_MODULES(TINFO, [tinfo], [
+  PKG_CHECK_MODULES(TINFO, [tinfow], [
     dnl pkg-config success
     have_tinfo=yes
     UL_PKG_STATIC([TINFO_LIBS_STATIC], [tinfow])], [
 
     dnl If pkg-config failed, fall back to classic searching.
-    AC_CHECK_LIB([tinfo], [tgetent], [
+    AC_CHECK_LIB([tinfow], [tgetent], [
        have_tinfo=yes
        TINFO_LIBS="-ltinfow"
        TINFO_LIBS_STATIC="-ltinfow"
