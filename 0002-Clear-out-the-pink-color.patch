From c81bf51044cbdba887b1008f3a0a0f5adaddd3c9 Mon Sep 17 00:00:00 2001
From: Auke Kok <auke-jan.h.kok@intel.com>
Date: Mon, 2 Apr 2018 16:28:04 -0700
Subject: [PATCH 2/4] Clear out the pink color.

---
 term-utils/agetty.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/term-utils/agetty.c b/term-utils/agetty.c
index 99bb59d..b5a59e1 100644
--- a/term-utils/agetty.c
+++ b/term-utils/agetty.c
@@ -1716,6 +1716,11 @@ static FILE *issuedir_next_file(int dd, struct dirent **namelist, int nfiles, in
 #ifndef ISSUE_SUPPORT
 static void print_issue_file(struct options *op, struct termios *tp __attribute__((__unused__)))
 {
+	putchar('\033');
+	putchar('[');
+	putchar('0');
+	putchar('m');
+
 	if ((op->flags & F_NONL) == 0) {
 		/* Issue not in use, start with a new line. */
 		write_all(STDOUT_FILENO, "\r\n", 2);
@@ -1792,8 +1797,16 @@ static void print_issue_file(struct options *op, struct termios *tp)
 			if (!f && i < nfiles)
 				f = issuedir_next_file(dd, namelist, nfiles, &i);
 #endif
-			if (!f)
+			if (!f) {
+				output_special_char('S', op, tp, f);
+				putchar(' ');
+				output_special_char('n', op, tp, f);
+				putchar(' ');
+				output_special_char('l', op, tp, f);
+				putchar('\r');
+				putchar('\n');
 				break;
+			}
 			while ((c = getc(f)) != EOF) {
 				if (c == '\\')
 					output_special_char(getc(f), op, tp, f);
-- 
2.16.3

